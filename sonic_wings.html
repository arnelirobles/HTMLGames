<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sonic Wings Clone</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #1a1a1a;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
        }

        #game-container {
            position: relative;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        canvas {
            display: block;
            background: linear-gradient(to bottom, #87CEEB, #E0F7FA);
            /* Sky background */
        }

        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 20px;
            box-sizing: border-box;
        }

        .hud-text {
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        #start-screen,
        #game-over-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            pointer-events: auto;
        }

        h1 {
            font-size: 48px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #FFD700;
            text-shadow: 0 0 10px #FF4500;
        }

        button {
            padding: 15px 40px;
            font-size: 24px;
            background: linear-gradient(45deg, #FF4500, #FF8C00);
            border: none;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.1s;
            font-weight: bold;
            text-transform: uppercase;
        }

        button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px #FF4500;
        }

        .hidden {
            display: none !important;
        }

        .controls-hint {
            margin-top: 20px;
            font-size: 16px;
            opacity: 0.8;
        }
    </style>
</head>

<body>

    <div id="game-container">
        <canvas id="gameCanvas" width="480" height="720"></canvas>

        <div id="ui-layer">
            <div class="hud-text">SCORE: <span id="score-display">0</span></div>
            <div class="hud-text">LIVES: <span id="lives-display">3</span></div>
        </div>

        <div id="start-screen">
            <h1>Sky Ace</h1>
            <button id="start-btn">Start Mission</button>
            <div class="controls-hint">Arrows to Move â€¢ Space to Shoot</div>
        </div>

        <div id="game-over-screen" class="hidden">
            <h1>Mission Failed</h1>
            <div class="hud-text" style="margin-bottom: 20px;">Final Score: <span id="final-score">0</span></div>
            <button id="restart-btn">Try Again</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('score-display');
        const livesDisplay = document.getElementById('lives-display');
        const startScreen = document.getElementById('start-screen');
        const gameOverScreen = document.getElementById('game-over-screen');
        const finalScoreDisplay = document.getElementById('final-score');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');

        // Game State
        let gameRunning = false;
        let score = 0;
        let lives = 3;
        let frameCount = 0;

        // Input
        const keys = {
            ArrowUp: false,
            ArrowDown: false,
            ArrowLeft: false,
            ArrowRight: false,
            Space: false
        };

        // Entities
        let player;
        let bullets = [];
        let enemies = [];
        let particles = [];
        let clouds = [];

        // Constants
        const PLAYER_SPEED = 5;
        const BULLET_SPEED = 10;
        const ENEMY_SPEED = 3;
        const SPAWN_RATE = 60; // Frames

        class Player {
            constructor() {
                this.width = 40;
                this.height = 50;
                this.x = canvas.width / 2 - this.width / 2;
                this.y = canvas.height - 100;
                this.color = '#E0E0E0';
                this.shootTimer = 0;
            }

            update() {
                if (keys.ArrowLeft && this.x > 0) this.x -= PLAYER_SPEED;
                if (keys.ArrowRight && this.x < canvas.width - this.width) this.x += PLAYER_SPEED;
                if (keys.ArrowUp && this.y > 0) this.y -= PLAYER_SPEED;
                if (keys.ArrowDown && this.y < canvas.height - this.height) this.y += PLAYER_SPEED;

                if (keys.Space || keys.code === 'Space') {
                    if (this.shootTimer <= 0) {
                        this.shoot();
                        this.shootTimer = 8; // Fire rate
                    }
                }
                if (this.shootTimer > 0) this.shootTimer--;
            }

            shoot() {
                // Double shot
                bullets.push(new Bullet(this.x + 5, this.y, -BULLET_SPEED, 'player'));
                bullets.push(new Bullet(this.x + this.width - 5, this.y, -BULLET_SPEED, 'player'));
            }

            draw() {
                ctx.save();
                ctx.translate(this.x + this.width / 2, this.y + this.height / 2);

                // Banking effect
                if (keys.ArrowLeft) ctx.rotate(-0.1);
                if (keys.ArrowRight) ctx.rotate(0.1);

                // Fuselage
                ctx.fillStyle = '#dcdcdc';
                ctx.beginPath();
                ctx.moveTo(0, -25);
                ctx.lineTo(10, 10);
                ctx.lineTo(0, 20);
                ctx.lineTo(-10, 10);
                ctx.closePath();
                ctx.fill();

                // Wings
                ctx.fillStyle = '#c0c0c0';
                ctx.beginPath();
                ctx.moveTo(0, -5);
                ctx.lineTo(20, 15);
                ctx.lineTo(20, 25);
                ctx.lineTo(0, 15);
                ctx.lineTo(-20, 25);
                ctx.lineTo(-20, 15);
                ctx.closePath();
                ctx.fill();

                // Cockpit
                ctx.fillStyle = '#87CEFA';
                ctx.beginPath();
                ctx.ellipse(0, -5, 3, 8, 0, 0, Math.PI * 2);
                ctx.fill();

                // Engine glow
                ctx.fillStyle = '#FF8C00';
                ctx.beginPath();
                ctx.arc(-8, 25, 3, 0, Math.PI * 2);
                ctx.arc(8, 25, 3, 0, Math.PI * 2);
                ctx.fill();

                ctx.restore();
            }
        }

        class Bullet {
            constructor(x, y, dy, type) {
                this.x = x;
                this.y = y;
                this.dy = dy;
                this.type = type; // 'player' or 'enemy'
                this.width = 4;
                this.height = 10;
                this.markedForDeletion = false;
            }

            update() {
                this.y += this.dy;
                if (this.y < 0 || this.y > canvas.height) {
                    this.markedForDeletion = true;
                }
            }

            draw() {
                ctx.fillStyle = this.type === 'player' ? '#FFFF00' : '#FF0000';
                ctx.fillRect(this.x - this.width / 2, this.y, this.width, this.height);
            }
        }

        class Enemy {
            constructor() {
                this.width = 40;
                this.height = 40;
                this.x = Math.random() * (canvas.width - this.width);
                this.y = -this.height;
                this.speed = Math.random() * 2 + 2;
                this.markedForDeletion = false;
                this.hp = 3;
                this.shootTimer = Math.random() * 100;
            }

            update() {
                this.y += this.speed;
                if (this.y > canvas.height) this.markedForDeletion = true;

                // Simple shooting logic
                this.shootTimer--;
                if (this.shootTimer <= 0) {
                    bullets.push(new Bullet(this.x + this.width / 2, this.y + this.height, 6, 'enemy'));
                    this.shootTimer = 100 + Math.random() * 100;
                }
            }

            draw() {
                ctx.save();
                ctx.translate(this.x + this.width / 2, this.y + this.height / 2);

                // Enemy shape (delta wing)
                ctx.fillStyle = '#556B2F'; // Dark Olive Green
                ctx.beginPath();
                ctx.moveTo(0, 20);
                ctx.lineTo(20, -10);
                ctx.lineTo(0, -20);
                ctx.lineTo(-20, -10);
                ctx.closePath();
                ctx.fill();

                // Details
                ctx.fillStyle = '#8FBC8F';
                ctx.beginPath();
                ctx.moveTo(0, -10);
                ctx.lineTo(5, 0);
                ctx.lineTo(0, 10);
                ctx.lineTo(-5, 0);
                ctx.closePath();
                ctx.fill();

                ctx.restore();
            }
        }

        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.size = Math.random() * 5 + 2;
                this.speedX = Math.random() * 4 - 2;
                this.speedY = Math.random() * 4 - 2;
                this.color = color;
                this.life = 20;
                this.markedForDeletion = false;
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                this.life--;
                if (this.life <= 0) this.markedForDeletion = true;
            }
            draw() {
                ctx.fillStyle = this.color;
                ctx.globalAlpha = this.life / 20;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.globalAlpha = 1.0;
            }
        }

        class Cloud {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = -100;
                this.speed = Math.random() * 1 + 0.5;
                this.size = Math.random() * 50 + 50;
                this.markedForDeletion = false;
            }
            update() {
                this.y += this.speed;
                if (this.y > canvas.height + 100) this.markedForDeletion = true;
            }
            draw() {
                ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.arc(this.x + 30, this.y + 10, this.size * 0.8, 0, Math.PI * 2);
                ctx.arc(this.x - 30, this.y + 10, this.size * 0.8, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function init() {
            player = new Player();
            bullets = [];
            enemies = [];
            particles = [];
            clouds = [];
            score = 0;
            lives = 3;
            frameCount = 0;
            updateUI();
        }

        function spawnEnemy() {
            if (frameCount % SPAWN_RATE === 0) {
                enemies.push(new Enemy());
            }
        }

        function spawnCloud() {
            if (frameCount % 200 === 0) {
                clouds.push(new Cloud());
            }
        }

        function createExplosion(x, y) {
            for (let i = 0; i < 10; i++) {
                particles.push(new Particle(x, y, '#FF4500'));
                particles.push(new Particle(x, y, '#FFFF00'));
            }
        }

        function checkCollisions() {
            // Bullets hitting enemies
            bullets.forEach(bullet => {
                if (bullet.type === 'player') {
                    enemies.forEach(enemy => {
                        if (!bullet.markedForDeletion && !enemy.markedForDeletion &&
                            bullet.x < enemy.x + enemy.width &&
                            bullet.x + bullet.width > enemy.x &&
                            bullet.y < enemy.y + enemy.height &&
                            bullet.y + bullet.height > enemy.y) {

                            bullet.markedForDeletion = true;
                            enemy.hp--;
                            if (enemy.hp <= 0) {
                                enemy.markedForDeletion = true;
                                createExplosion(enemy.x + enemy.width / 2, enemy.y + enemy.height / 2);
                                score += 100;
                                updateUI();
                            }
                        }
                    });
                } else if (bullet.type === 'enemy') {
                    // Enemy bullets hitting player
                    if (!bullet.markedForDeletion &&
                        bullet.x < player.x + player.width &&
                        bullet.x + bullet.width > player.x &&
                        bullet.y < player.y + player.height &&
                        bullet.y + bullet.height > player.y) {

                        bullet.markedForDeletion = true;
                        playerHit();
                    }
                }
            });

            // Enemies hitting player
            enemies.forEach(enemy => {
                if (!enemy.markedForDeletion &&
                    player.x < enemy.x + enemy.width &&
                    player.x + player.width > enemy.x &&
                    player.y < enemy.y + enemy.height &&
                    player.y + player.height > enemy.y) {

                    enemy.markedForDeletion = true;
                    createExplosion(enemy.x + enemy.width / 2, enemy.y + enemy.height / 2);
                    playerHit();
                }
            });
        }

        function playerHit() {
            createExplosion(player.x + player.width / 2, player.y + player.height / 2);
            lives--;
            updateUI();
            if (lives <= 0) {
                gameOver();
            } else {
                // Respawn invulnerability or reset position could go here
                // For now just a small visual shake or flash?
            }
        }

        function updateUI() {
            scoreDisplay.innerText = score;
            livesDisplay.innerText = lives;
        }

        function gameOver() {
            gameRunning = false;
            finalScoreDisplay.innerText = score;
            gameOverScreen.classList.remove('hidden');
        }

        function update() {
            if (!gameRunning) return;

            frameCount++;
            player.update();
            spawnEnemy();
            spawnCloud();

            bullets.forEach(b => b.update());
            bullets = bullets.filter(b => !b.markedForDeletion);

            enemies.forEach(e => e.update());
            enemies = enemies.filter(e => !e.markedForDeletion);

            particles.forEach(p => p.update());
            particles = particles.filter(p => !p.markedForDeletion);

            clouds.forEach(c => c.update());
            clouds = clouds.filter(c => !c.markedForDeletion);

            checkCollisions();
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw Clouds (background)
            clouds.forEach(c => c.draw());

            if (gameRunning) {
                player.draw();
            }

            enemies.forEach(e => e.draw());
            bullets.forEach(b => b.draw());
            particles.forEach(p => p.draw());
        }

        function loop() {
            update();
            draw();
            requestAnimationFrame(loop);
        }

        // Event Listeners
        window.addEventListener('keydown', e => {
            if (e.code === 'ArrowUp') keys.ArrowUp = true;
            if (e.code === 'ArrowDown') keys.ArrowDown = true;
            if (e.code === 'ArrowLeft') keys.ArrowLeft = true;
            if (e.code === 'ArrowRight') keys.ArrowRight = true;
            if (e.code === 'Space') keys.Space = true;
        });

        window.addEventListener('keyup', e => {
            if (e.code === 'ArrowUp') keys.ArrowUp = false;
            if (e.code === 'ArrowDown') keys.ArrowDown = false;
            if (e.code === 'ArrowLeft') keys.ArrowLeft = false;
            if (e.code === 'ArrowRight') keys.ArrowRight = false;
            if (e.code === 'Space') keys.Space = false;
        });

        startBtn.addEventListener('click', () => {
            startScreen.classList.add('hidden');
            init();
            gameRunning = true;
        });

        restartBtn.addEventListener('click', () => {
            gameOverScreen.classList.add('hidden');
            init();
            gameRunning = true;
        });

        // Initial background loop
        loop();

    </script>
</body>

</html>